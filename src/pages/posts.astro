---
import BlogPostCard from "../components/BlogPostCard.astro";
import AllLayout from "../layouts/AllLayout.astro";
import {getCollection} from "astro:content"
import GoBackButton from "../components/GoBackButton.astro";
import article from "../../public/article.svg"
import Tag from "../components/Tag";
const posts = await getCollection("post")

---

<AllLayout title="Meus Posts" transition:animate={"fade"}>
    <header class="bg-neutral-800 flex item items-center justify-around w-full font-rubik gap-4 py-6 px-4 relative shadow-2xl ">
        <div class="flex flex-col gap-4 max-[975px]:text-center">
            <h1 class="text-8xl max-[975px]:text-6xl max-sm:text-3xl font-bold drop-shadow-xl">Meus posts.</h1>
            <p>Discover stories, thinking, and expertise from writers on any topic.</p>
        </div>
        <img src={article.src} alt="Blog Header" class="max-[975px]:hidden" width={400} height={400}/>
        
        <GoBackButton/>
    </header>
   <section class="w-full mx-auto my-0 py-4 px-2 flex justify-around gap-8 max-lg:flex-col-reverse max-lg:items-center">
        <div class="flex flex-col gap-12 ">
            {posts.map((post) => (
                <BlogPostCard title={post.data.title} description={post.data.description} tags={post.data.tags} date={post.data.date} card_image={post.data.card_image} body={post.body}/>
                <BlogPostCard title={post.data.title} description={post.data.description} tags={post.data.tags} date={post.data.date} card_image={post.data.card_image} body={post.body}/>
                <BlogPostCard title={post.data.title} description={post.data.description} tags={post.data.tags} date={post.data.date} card_image={post.data.card_image} body={post.body}/>
                <BlogPostCard title={post.data.title} description={post.data.description} tags={post.data.tags} date={post.data.date} card_image={post.data.card_image} body={post.body}/>
                <BlogPostCard title={post.data.title} description={post.data.description} tags={post.data.tags} date={post.data.date} card_image={post.data.card_image} body={post.body}/>
            ))}
        </div>
        <aside class="w-[400px] max-lg:relative max-lg:w-full h-fit rounded-xl p-4 sticky top-4 flex flex-col gap-4">
            <h2 class="text-lg max-lg:text-xl font-bold">Principais assuntos dos artigos</h2>
            {posts.map((post) => (
                <div class="flex flex-wrap gap-4">
                    {post.data.tags.map((tag) => (
                        <Tag tag={tag}/>
                        <Tag tag={tag}/>
                        <Tag tag={tag}/>
                        <Tag tag={tag}/>
                        <Tag tag={tag}/>
                    ))}
                </div>
            ))}
        </aside>
   </section>
</AllLayout>